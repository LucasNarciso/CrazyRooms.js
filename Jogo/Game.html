<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo</title>
    <link rel="stylesheet" href="Style.css">
    <link rel="stylesheet" href="../GlobalStyle.css">

    <script id="scriptBase">
        
        //Info
        let info;
        if (window.self !== window.top) {
            // info = "A página está sendo aberta em um iframe.";
            info = "";
            setTimeout(iniciarGame, 100)
        } else {
            info = "O jogo não funciona aqui '-'";

            //ISecure
            document.getElementById('scriptBase').remove();
            setTimeout(()=>{window.location.href = "/MainGame.html"},1)
        }

        setTimeout(() => { 
            document.getElementById('info1').innerHTML = info;
        }, 100);

        function enviar(){
            let campo = document.querySelector('#campo')
            if(campo.value != ""){
                escreverNoTerminal('jogador', campo.value)
            }
            campo.value = "";
        }

        function limparTerminal(){
            document.querySelector('.ConteudoTerminal').innerHTML = ""
        }

        function iniciarGame(){
            let terminal = document.querySelector('.ConteudoTerminal')
            let campo = document.querySelector('#campo')

            campo.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("botao").click();
            }
            });
            escreverNoTerminal('jogo', 'Olá jogador! Bem vindo ao Crazy Rooms!');
            escreverNoTerminal('jogo', 'Gostaria de informar o seu nome? Ou podemos escolher pra você?', ["Informar meu nome", "Deixar que escolham"]);
        }

        function escreverNoTerminal(origem, texto, opcoes){
            let terminal = document.querySelector('.ConteudoTerminal')
            if(origem == 'jogo'){
                if(opcoes){
                    let opcoesHTML = opcoes.map((opcao,index)=>`<p style="padding-left: 15px;">${index+1}. ${opcao}</p>`)
                    console.log(opcoesHTML)
                    terminal.insertAdjacentHTML('beforeEnd',`<div class="mensagem escolha">
                        <p> ${texto}</p>
                        <div class="opcoes">
                            ${opcoesHTML.join('')}
                        </div>
                    </div>`)
                }else{
                    terminal.insertAdjacentHTML('beforeEnd',`<div class="mensagem">
                        <p> ${texto}</p>
                    </div>`)
                }
            }else if(origem == 'jogador'){
                terminal.insertAdjacentHTML('beforeEnd',`<div class="mensagem">
                    <p>> ${texto}</p>
                </div>`)
            }
        }
        
    </script>
</head>
<body>
    <div class="ContainerPrincipalJogo">
        <span id="info1"></span>
        <div class="ConteudoTerminal">
        </div>
        <div class="BarraTerminal">
            <input id="campo" type="text">
            <button id="botao" onclick="enviar()">ENVIAR</button>
        </div>
    </div>
</body>
</html>